<?php
use de\uni_muenster\fsphys;
require_once 'error_handler.inc';
require_once 'office_hours.inc';

// max. rows to show in preview for office hours during break
const OH_BREAK_MAX_ROWS = 9;
?>

<article class="module short">
<div class="module-content">
<h2><?=fsphys\loc_get_str('current office hours', true)?></h2>

<div class="subhead" style="margin: 1em 0;">
<?php
$dt_now = new \DateTime();
$semester = fsphys\semester_info($dt_now)['during_semester'];
$db = fsphys\mysql_db_connect();
if ($semester) {
	echo fsphys\loc_get_str('during the semester', true);
	echo '</div>';
	echo fsphys\office_hours_html($db, [], $dt_now);
}
else {
	echo fsphys\loc_get_str('semester break', true);
	echo '</div>';
	$options = ['short' => true];
	echo fsphys\office_hours_break_html($db, $options, OH_BREAK_MAX_ROWS);
}
fsphys\mysql_db_close($db);
?>

<p><a class="int"
	href="/Physik.FSPHYS/<?=fsphys\loc_url_lang_code()?>termine/"><?=
		fsphys\loc_get_str('complete office hours schedule', true)?></a></p>
</div>
</article>

