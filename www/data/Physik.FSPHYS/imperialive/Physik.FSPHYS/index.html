<?php
use de\uni_muenster\fsphys;
require_once 'error_handler.inc';
require_once 'office_hours.inc';

// max. rows to show in preview for office hours during break
const FP_MAX_ROWS = 10;
?>

<article class="module short">
<div class="module-content">
<h2>Aktuelle Präsenzzeiten</h2>

<?php
$dt_now = new \DateTimeImmutable();
$semester = fsphys\semester_info($dt_now)['during_semester'];
$db = fsphys\mysql_db_connect();

if ($semester) {
	echo '<div class="subhead" style="margin: 1em 0;">Vorlesungszeit</div>';
	$options = fsphys\DEFAULT_HTML_OPTIONS;
	$options['time_width'] = 20;
	echo fsphys\office_hours_html($db, $options, $dt_now);
}
else {
	echo '<div class="subhead" style="margin: 1em 0;">Vorlesungsfreie Zeit</div>';
	$options = fsphys\DEFAULT_HTML_OPTIONS;
	$options['short'] = true;
	echo fsphys\office_hours_html($db, $options, $dt_now);
}

fsphys\mysql_db_close($db);
?>

<p><a class="int" href="/Physik.FSPHYS/termine/">Vollständiger Präsenzplan</a></p>
</div>
</article>

